{
  "version": 3,
  "sources": ["../../../../../../node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js"],
  "sourcesContent": ["import { __assign, __rest } from \"tslib\";\nimport { createOperatorSubscriber } from '../../operators/OperatorSubscriber';\nimport { Observable } from '../../Observable';\nimport { innerFrom } from '../../observable/innerFrom';\nexport function fromFetch(input, initWithSelector) {\n    if (initWithSelector === void 0) { initWithSelector = {}; }\n    var selector = initWithSelector.selector, init = __rest(initWithSelector, [\"selector\"]);\n    return new Observable(function (subscriber) {\n        var controller = new AbortController();\n        var signal = controller.signal;\n        var abortable = true;\n        var outerSignal = init.signal;\n        if (outerSignal) {\n            if (outerSignal.aborted) {\n                controller.abort();\n            }\n            else {\n                var outerSignalHandler_1 = function () {\n                    if (!signal.aborted) {\n                        controller.abort();\n                    }\n                };\n                outerSignal.addEventListener('abort', outerSignalHandler_1);\n                subscriber.add(function () { return outerSignal.removeEventListener('abort', outerSignalHandler_1); });\n            }\n        }\n        var perSubscriberInit = __assign(__assign({}, init), { signal: signal });\n        var handleError = function (err) {\n            abortable = false;\n            subscriber.error(err);\n        };\n        fetch(input, perSubscriberInit)\n            .then(function (response) {\n            if (selector) {\n                innerFrom(selector(response)).subscribe(createOperatorSubscriber(subscriber, undefined, function () {\n                    abortable = false;\n                    subscriber.complete();\n                }, handleError));\n            }\n            else {\n                abortable = false;\n                subscriber.next(response);\n                subscriber.complete();\n            }\n        })\n            .catch(handleError);\n        return function () {\n            if (abortable) {\n                controller.abort();\n            }\n        };\n    });\n}\n"],
  "mappings": ";;;;;;;;;;AAIO,SAAS,UAAU,OAAO,kBAAkB;AAC/C,MAAI,qBAAqB,QAAQ;AAAE,uBAAmB,CAAC;AAAA,EAAG;AAC1D,MAAI,WAAW,iBAAiB,UAAU,OAAO,OAAO,kBAAkB,CAAC,UAAU,CAAC;AACtF,SAAO,IAAI,WAAW,SAAU,YAAY;AACxC,QAAI,aAAa,IAAI,gBAAgB;AACrC,QAAI,SAAS,WAAW;AACxB,QAAI,YAAY;AAChB,QAAI,cAAc,KAAK;AACvB,QAAI,aAAa;AACb,UAAI,YAAY,SAAS;AACrB,mBAAW,MAAM;AAAA,MACrB,OACK;AACD,YAAI,uBAAuB,WAAY;AACnC,cAAI,CAAC,OAAO,SAAS;AACjB,uBAAW,MAAM;AAAA,UACrB;AAAA,QACJ;AACA,oBAAY,iBAAiB,SAAS,oBAAoB;AAC1D,mBAAW,IAAI,WAAY;AAAE,iBAAO,YAAY,oBAAoB,SAAS,oBAAoB;AAAA,QAAG,CAAC;AAAA,MACzG;AAAA,IACJ;AACA,QAAI,oBAAoB,SAAS,SAAS,CAAC,GAAG,IAAI,GAAG,EAAE,OAAe,CAAC;AACvE,QAAI,cAAc,SAAU,KAAK;AAC7B,kBAAY;AACZ,iBAAW,MAAM,GAAG;AAAA,IACxB;AACA,UAAM,OAAO,iBAAiB,EACzB,KAAK,SAAU,UAAU;AAC1B,UAAI,UAAU;AACV,kBAAU,SAAS,QAAQ,CAAC,EAAE,UAAU,yBAAyB,YAAY,QAAW,WAAY;AAChG,sBAAY;AACZ,qBAAW,SAAS;AAAA,QACxB,GAAG,WAAW,CAAC;AAAA,MACnB,OACK;AACD,oBAAY;AACZ,mBAAW,KAAK,QAAQ;AACxB,mBAAW,SAAS;AAAA,MACxB;AAAA,IACJ,CAAC,EACI,MAAM,WAAW;AACtB,WAAO,WAAY;AACf,UAAI,WAAW;AACX,mBAAW,MAAM;AAAA,MACrB;AAAA,IACJ;AAAA,EACJ,CAAC;AACL;",
  "names": []
}
